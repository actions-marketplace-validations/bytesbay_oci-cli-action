name: ci

on: 
  push:
    branches:
      - master

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:

      - uses: actions/checkout@v1
      
      - name: Install oci-cli
        uses: ./
        with:
          user: ${{ secrets.OCI_USER }}
          fingerprint: ${{ secrets.OCI_FINGERPRINT }}
          tenancy: ${{ secrets.OCI_TENANCY }}
          region: ${{ secrets.OCI_REGION }}
          api_key: |
            ${{ secrets.OCI_API_KEY }}
          verbose: true

      - run: oci -v && oci compute instance list --all -c ocid1.tenancy.oc1..aaaaaaaaz4d7yx6z2ipyz5pre7t7mzwnhtm6tq5sw3tetszqdfuyybgm52ea